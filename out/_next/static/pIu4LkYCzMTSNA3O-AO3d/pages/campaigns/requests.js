(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{Mybo:function(e,t,a){"use strict";a.r(t);var n=a("o0o1"),r=a.n(n),c=a("HaE+"),s=a("1OyB"),l=a("vuIU"),i=a("Ji7U"),o=a("md7G"),u=a("foSv"),d=a("q1tI"),p=a.n(d),b=a("CafY"),f=a("pVnL"),h=a.n(f),m=(a("Wt1U"),a("3WF5")),v=a.n(m),O=a("TSYQ"),j=a.n(O),g=(a("17x9"),a("ZeOK")),y=a("ICNK"),N=a("Y53p"),w=a("H+2d");function P(e){var t=e.children,a=e.className,n=j()(a),r=Object(y.a)(P,e),c=Object(N.a)(P,e);return p.a.createElement(c,h()({},r,{className:n}),t)}P.handledProps=["as","children","className"],P.defaultProps={as:"tbody"},P.propTypes={};var A=P,R=a("MZgk"),E=a("D1pA");function k(e){var t=e.active,a=e.children,n=e.className,r=e.collapsing,c=e.content,s=e.disabled,l=e.error,i=e.icon,o=e.negative,u=e.positive,d=e.selectable,b=e.singleLine,f=e.textAlign,m=e.verticalAlign,v=e.warning,O=e.width,P=j()(Object(g.a)(t,"active"),Object(g.a)(r,"collapsing"),Object(g.a)(s,"disabled"),Object(g.a)(l,"error"),Object(g.a)(o,"negative"),Object(g.a)(u,"positive"),Object(g.a)(d,"selectable"),Object(g.a)(b,"single line"),Object(g.a)(v,"warning"),Object(g.d)(f),Object(g.f)(m),Object(g.g)(O,"wide"),n),A=Object(y.a)(k,e),R=Object(N.a)(k,e);return w.a.isNil(a)?p.a.createElement(R,h()({},A,{className:P}),E.a.create(i),c):p.a.createElement(R,h()({},A,{className:P}),a)}k.handledProps=["active","as","children","className","collapsing","content","disabled","error","icon","negative","positive","selectable","singleLine","textAlign","verticalAlign","warning","width"],k.defaultProps={as:"td"},k.propTypes={},k.create=Object(R.e)(k,(function(e){return{content:e}}));var x=k;function C(e){var t=e.children,a=e.className,n=e.content,r=e.fullWidth,c=j()(Object(g.a)(r,"full-width"),a),s=Object(y.a)(C,e),l=Object(N.a)(C,e);return p.a.createElement(l,h()({},s,{className:c}),w.a.isNil(t)?n:t)}C.handledProps=["as","children","className","content","fullWidth"],C.defaultProps={as:"thead"},C.propTypes={};var q=C;function T(e){var t=e.as,a=Object(y.a)(T,e);return p.a.createElement(q,h()({},a,{as:t}))}T.handledProps=["as"],T.propTypes={},T.defaultProps={as:"tfoot"};var D=T;function S(e){var t=e.as,a=e.className,n=e.sorted,r=j()(Object(g.e)(n,"sorted"),a),c=Object(y.a)(S,e);return p.a.createElement(x,h()({},c,{as:t,className:r}))}S.handledProps=["as","className","sorted"],S.propTypes={},S.defaultProps={as:"th"};var z=S;function I(e){var t=e.active,a=e.cellAs,n=e.cells,r=e.children,c=e.className,s=e.disabled,l=e.error,i=e.negative,o=e.positive,u=e.textAlign,d=e.verticalAlign,b=e.warning,f=j()(Object(g.a)(t,"active"),Object(g.a)(s,"disabled"),Object(g.a)(l,"error"),Object(g.a)(i,"negative"),Object(g.a)(o,"positive"),Object(g.a)(b,"warning"),Object(g.d)(u),Object(g.f)(d),c),m=Object(y.a)(I,e),O=Object(N.a)(I,e);return w.a.isNil(r)?p.a.createElement(O,h()({},m,{className:f}),v()(n,(function(e){return x.create(e,{defaultProps:{as:a}})}))):p.a.createElement(O,h()({},m,{className:f}),r)}I.handledProps=["active","as","cellAs","cells","children","className","disabled","error","negative","positive","textAlign","verticalAlign","warning"],I.defaultProps={as:"tr",cellAs:"td"},I.propTypes={},I.create=Object(R.e)(I,(function(e){return{cells:e}}));var B=I;function H(e){var t=e.attached,a=e.basic,n=e.celled,r=e.children,c=e.className,s=e.collapsing,l=e.color,i=e.columns,o=e.compact,u=e.definition,d=e.fixed,b=e.footerRow,f=e.headerRow,m=e.headerRows,O=e.inverted,P=e.padded,R=e.renderBodyRow,E=e.selectable,k=e.singleLine,x=e.size,C=e.sortable,T=e.stackable,S=e.striped,z=e.structured,I=e.tableData,W=e.textAlign,F=e.unstackable,K=e.verticalAlign,L=j()("ui",l,x,Object(g.a)(n,"celled"),Object(g.a)(s,"collapsing"),Object(g.a)(u,"definition"),Object(g.a)(d,"fixed"),Object(g.a)(O,"inverted"),Object(g.a)(E,"selectable"),Object(g.a)(k,"single line"),Object(g.a)(C,"sortable"),Object(g.a)(T,"stackable"),Object(g.a)(S,"striped"),Object(g.a)(z,"structured"),Object(g.a)(F,"unstackable"),Object(g.b)(t,"attached"),Object(g.b)(a,"basic"),Object(g.b)(o,"compact"),Object(g.b)(P,"padded"),Object(g.d)(W),Object(g.f)(K),Object(g.g)(i,"column"),"table",c),Y=Object(y.a)(H,e),J=Object(N.a)(H,e);if(!w.a.isNil(r))return p.a.createElement(J,h()({},Y,{className:L}),r);var Z={defaultProps:{cellAs:"th"}},_=(f||m)&&p.a.createElement(q,null,B.create(f,Z),v()(m,(function(e){return B.create(e,Z)})));return p.a.createElement(J,h()({},Y,{className:L}),_,p.a.createElement(A,null,R&&v()(I,(function(e,t){return B.create(R(e,t))}))),b&&p.a.createElement(D,null,B.create(b)))}H.handledProps=["as","attached","basic","celled","children","className","collapsing","color","columns","compact","definition","fixed","footerRow","headerRow","headerRows","inverted","padded","renderBodyRow","selectable","singleLine","size","sortable","stackable","striped","structured","tableData","textAlign","unstackable","verticalAlign"],H.defaultProps={as:"table"},H.propTypes={},H.Body=A,H.Cell=x,H.Footer=D,H.Header=q,H.HeaderCell=z,H.Row=B;var W=H,F=a("TbSc"),K=a("QetY"),L=a("8cHP"),Y=a("4vrq"),J=a("JX7q"),Z=a("rePB"),_=a("oZBQ"),G=p.a.createElement;function M(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(o.a)(this,a)}}var Q=function(e){Object(i.a)(a,e);var t=M(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return e=t.call.apply(t,[this].concat(l)),Object(Z.a)(Object(J.a)(e),"state",{loading1:!1,loading2:!1}),Object(Z.a)(Object(J.a)(e),"onApprove",Object(c.a)(r.a.mark((function t(){var a,n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading1:!0}),a=Object(Y.a)(e.props.address),t.next=4,_.a.eth.getAccounts();case 4:return n=t.sent,t.prev=5,t.next=8,a.methods.approveRequest(e.props.id).send({from:n[0]});case 8:t.next=12;break;case 10:t.prev=10,t.t0=t.catch(5);case 12:e.setState({loading1:!1}),L.Router.replace("/campaigns/".concat(e.props.address,"/requests"));case 14:case"end":return t.stop()}}),t,null,[[5,10]])})))),Object(Z.a)(Object(J.a)(e),"onFinalize",Object(c.a)(r.a.mark((function t(){var a,n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading2:!0}),a=Object(Y.a)(e.props.address),t.next=4,_.a.eth.getAccounts();case 4:return n=t.sent,t.prev=5,t.next=8,a.methods.finalizeRequest(e.props.id).send({from:n[0]});case 8:t.next=12;break;case 10:t.prev=10,t.t0=t.catch(5);case 12:e.setState({loading2:!1}),L.Router.replace("/campaigns/".concat(e.props.address,"/requests"));case 14:case"end":return t.stop()}}),t,null,[[5,10]])})))),e}return Object(l.a)(a,[{key:"render",value:function(){var e=W.Row,t=W.Cell,a=this.props,n=a.id,r=a.request,c=a.approversCount,s=r.approvalCount>c/2;return G(e,{disabled:r.complete,positive:s&&!r.complete},G(t,null,n+1),G(t,null,r.description),G(t,null,_.a.utils.fromWei(r.value,"ether")," "),G(t,null,r.recipient),G(t,null,r.approvalCount,"/",c),G(t,null,G(K.a,{disabled:r.complete,loading:this.state.loading1,color:"green",basic:!0,onClick:this.onApprove},"Approve")),G(t,null,G(K.a,{disabled:r.complete,loading:this.state.loading2,color:"teal",basic:!0,onClick:this.onFinalize},"Finalize")))}}]),a}(d.Component),U=p.a.createElement;function X(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(o.a)(this,a)}}var V=function(e){Object(i.a)(a,e);var t=X(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"renderRow",value:function(){var e=this;return this.props.requests.map((function(t,a){return U(Q,{id:a,key:a,request:t,address:e.props.address,approversCount:e.props.approversCount})}))}},{key:"render",value:function(){var e=W.Header,t=W.Row,a=W.HeaderCell,n=W.Body;return U(b.a,null,U(F.a,{info:!0,header:"Information alert",content:"You only finalize the request when you get more than 50% vote ",style:{width:"620px"}}),U("h2",null,"Pending Requests"),U(L.Link,{route:"/campaigns/".concat(this.props.address,"/requests/new")},U("a",null,U(K.a,{floated:"right",primary:!0,style:{marginBottom:30}}," ","Add Request"))),U(W,null,U(e,null,U(t,null,U(a,null,"ID"),U(a,null,"Description"),U(a,null,"Ammount(in ether)"),U(a,null,"Recipient"),U(a,null,"Approval"),U(a,null,"Approve"),U(a,null,"Finalize"))),U(n,null,this.renderRow())),U("h3",null,"Found ",this.props.requestCount," request ."))}}],[{key:"getInitialProps",value:function(){var e=Object(c.a)(r.a.mark((function e(t){var a,n,c,s,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.query.address,n=Object(Y.a)(a),e.next=4,n.methods.getRequestCount().call();case 4:return c=e.sent,e.next=7,n.methods.approversCount().call();case 7:return s=e.sent,e.next=10,Promise.all(Array(parseInt(c)).fill().map((function(e,t){return n.methods.requests(t).call()})));case 10:return l=e.sent,e.abrupt("return",{address:a,requests:l,requestCount:c,approversCount:s});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),a}(d.Component);t.default=V},TbSc:function(e,t,a){"use strict";a.d(t,"a",(function(){return K}));var n=a("pVnL"),r=a.n(n),c=a("lwsE"),s=a.n(c),l=a("W8MJ"),i=a.n(l),o=a("a1gu"),u=a.n(o),d=a("Nsbk"),p=a.n(d),b=a("PJYZ"),f=a.n(b),h=a("7W2i"),m=a.n(h),v=a("lSNA"),O=a.n(v),j=a("J2iB"),g=a.n(j),y=(a("Wt1U"),a("TSYQ")),N=a.n(y),w=(a("17x9"),a("q1tI")),P=a.n(w),A=a("ZeOK"),R=a("ICNK"),E=a("Y53p"),k=a("H+2d"),x=a("MZgk"),C=a("D1pA");function q(e){var t=e.children,a=e.className,n=e.content,c=N()("content",a),s=Object(R.a)(q,e),l=Object(E.a)(q,e);return P.a.createElement(l,r()({},s,{className:c}),k.a.isNil(t)?n:t)}q.handledProps=["as","children","className","content"],q.propTypes={};var T=q;function D(e){var t=e.children,a=e.className,n=e.content,c=N()("header",a),s=Object(R.a)(D,e),l=Object(E.a)(D,e);return P.a.createElement(l,r()({},s,{className:c}),k.a.isNil(t)?n:t)}D.handledProps=["as","children","className","content"],D.propTypes={},D.create=Object(x.e)(D,(function(e){return{content:e}}));var S=D,z=a("3WF5"),I=a.n(z);function B(e){var t=e.children,a=e.className,n=e.content,c=N()("content",a),s=Object(R.a)(B,e),l=Object(E.a)(B,e);return P.a.createElement(l,r()({},s,{className:c}),k.a.isNil(t)?n:t)}B.handledProps=["as","children","className","content"],B.propTypes={},B.defaultProps={as:"li"},B.create=Object(x.e)(B,(function(e){return{content:e}}));var H=B;function W(e){var t=e.children,a=e.className,n=e.items,c=N()("list",a),s=Object(R.a)(W,e),l=Object(E.a)(W,e);return P.a.createElement(l,r()({},s,{className:c}),k.a.isNil(t)?I()(n,H.create):t)}W.handledProps=["as","children","className","items"],W.propTypes={},W.defaultProps={as:"ul"},W.create=Object(x.e)(W,(function(e){return{items:e}}));var F=W,K=function(e){function t(){var e,a;s()(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return a=u()(this,(e=p()(t)).call.apply(e,[this].concat(r))),O()(f()(a),"handleDismiss",(function(e){var t=a.props.onDismiss;t&&t(e,a.props)})),a}return m()(t,e),i()(t,[{key:"render",value:function(){var e=this.props,a=e.attached,n=e.children,c=e.className,s=e.color,l=e.compact,i=e.content,o=e.error,u=e.floating,d=e.header,p=e.hidden,b=e.icon,f=e.info,h=e.list,m=e.negative,v=e.onDismiss,O=e.positive,j=e.size,y=e.success,w=e.visible,q=e.warning,D=N()("ui",s,j,Object(A.a)(l,"compact"),Object(A.a)(o,"error"),Object(A.a)(u,"floating"),Object(A.a)(p,"hidden"),Object(A.a)(b,"icon"),Object(A.a)(f,"info"),Object(A.a)(m,"negative"),Object(A.a)(O,"positive"),Object(A.a)(y,"success"),Object(A.a)(w,"visible"),Object(A.a)(q,"warning"),Object(A.b)(a,"attached"),"message",c),z=v&&P.a.createElement(C.a,{name:"close",onClick:this.handleDismiss}),I=Object(R.a)(t,this.props),B=Object(E.a)(t,this.props);return k.a.isNil(n)?P.a.createElement(B,r()({},I,{className:D}),z,C.a.create(b,{autoGenerateKey:!1}),(!g()(d)||!g()(i)||!g()(h))&&P.a.createElement(T,null,S.create(d,{autoGenerateKey:!1}),F.create(h,{autoGenerateKey:!1}),Object(x.c)(i,{autoGenerateKey:!1}))):P.a.createElement(B,r()({},I,{className:D}),z,n)}}]),t}(w.Component);O()(K,"Content",T),O()(K,"Header",S),O()(K,"List",F),O()(K,"Item",H),O()(K,"handledProps",["as","attached","children","className","color","compact","content","error","floating","header","hidden","icon","info","list","negative","onDismiss","positive","size","success","visible","warning"]),K.propTypes={}},"m/hO":function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/campaigns/requests",function(){return a("Mybo")}])}},[["m/hO",0,2,1,3,5]]]);